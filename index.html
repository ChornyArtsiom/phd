<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PhD. Library</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.9/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Karla:400,700" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    html,
    body {
        font-family: 'Karla', sans-serif;
        font-size: 14px;
    }

    input {
        border: none;
        border-bottom: 3px solid #2196F3;
        color: #666;
        font-size: 2em;
        letter-spacing: 12px;
        outline: none;
        padding-left: 15px;
        width: 100%;
        max-width: 320px;
    }

    h1 {
        font-weight: bold;
    }

    h3 {
        color: #F44336;
    }

    header {
        margin-top: 30px;
    }

    .content {
        margin-top: 20px;
    }

    .returnList {
        margin: 40px 0;
    }

    .returnList>a {
        color: #666;
        padding: 10px 20px;
        text-decoration: none;
        border: #888 solid 2px;
        font-weight: bold;
    }

    .returnList>a:hover {
        background-color: #444;
        color: #fff;
        border-color: #444;
    }

    .clearQuery {
        margin: 40px 0;
    }

    .clearQuery>a {
        color: #da1214;
        border: #da1214 solid 2px;
        padding: 10px 20px;
        text-decoration: none;
        font-weight: bold;
    }

    .clearQuery>a:hover {
        background-color: #f52819;
        border-color: #f52819;
        color: #fff;

    }

    .block {
        margin-bottom: 25px;
    }

    .categories {
        width: 100%;
    }

    .container>h1 {
        margin-bottom: 15px;
    }

    .category__section>h3 {
        margin: 15px 0;
    }

    .categories>ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .categories>ul>li {
        padding: 10px 0;
        margin: 0;
    }

    .categories>ul>li>a {
        display: block;
        padding: 20px;
        background-color: #253138;
        color: #fff;
        font-size: 2em;
        text-decoration: none;
        text-transform: uppercase;
    }
    </style>
</head>

<body>
    <header>
    </header>
    <div id="app" class="container">
        <h1>Кто ищет, тот всегда найдет</h1>
        <section class="category__section" v-if="categoryName==''">
            <h3>Выберите категорию:</h3>
            <div class="categories">
                <ul>
                    <li v-for="item in setCategoryList">
                        <a href="#" @click="setCategory(item)">{{ item }}</a>
                    </li>
                </ul>
            </div>
        </section>
        <section class="content" v-else>
            <p class="returnList"><a href="#" @click="clearCategory()">&#8592;&nbsp;&nbsp;&nbsp;Выбрать категорию</a></p>
            <p>Введите первые буквы вопроса:</p>
            <input ref="search" type="text" v-model="search" placeholder="- - -">
            <p class="clearQuery"><a href="#" @click="clearQuery()">Ввести заново</a></p>
            <div v-for="post in filteredList">
                <div style="color:red;margin:20px 0">Вопрос: {{ post.question }}</div>
                <div style="color:green">Ответ: {{ post.answer }}</div>
            </div>
        </section>
    </div>
    <footer>
    </footer>
    <script>
    var vm = new Vue({
        el: '#app',
        data: {
            item: '',
            search: '',
            categoryName: '',
            categoryList: [],
            tips: [],
            array: []
        },
        created: function() {
            axios.get("https://raw.githubusercontent.com/ChornyArtsiom/phd/dev/data.json")
                .then(response => { this.tips = response.data })
        },
        computed: {
            filteredList: function() {
                return this.tips.filter(post => {
                    if (this.search != '' && post.category == this.categoryName)
                        return post.code.toLowerCase().includes(this.search.toLowerCase())
                })
            },
            setCategoryList: function() {
                return ((Array.from(this.tips)).map(ex => ex.category)).filter((v, i, a) => a.indexOf(v) === i);
            }

        },
        methods: {
            setCategory(item) {
                this.categoryName = item;

            },
            clearCategory() {
                this.categoryName = '';

            },
            clearQuery() {
                this.$refs.search.focus();
                this.search = '';
            }
        }

    });
    // console.log(vm);
    </script>
</body>

</html>