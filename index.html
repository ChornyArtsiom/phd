<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PhD. Library</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.9/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
    input {
        /*border-radius: 5px;*/
        padding: 20px 0px 10px 20px;
        border: none;
        border-bottom: 3px solid #09f;
        color: #666;
        font-size: 2em;
        /*width: 50%;*/
        margin: 0px 50px;
        letter-spacing: 1rem;

        animation-name: color_change;
        animation-duration: 1s;
        animation-iteration-count: infinite;
        animation-direction: alternate;

        animation: color_change 1s infinite alternate;
        outline: none;
    }

    section {
        text-align: center;
    }

    section>p:nth-child(1) {
        text-align: left;
    }

    .input__focused {
        color: transparent;
        display: inline-block;
        text-shadow: 0 0 0 #111;

        &:focus {
            outline: none;
        }
    }

    .block {
        margin-bottom: 25px;
    }

    @keyframes color_change {
        0% {
            border-color: blue;
        }

        100% {
            border-color: red;
        }
    }
    </style>
</head>

<body>
    <header>
    </header>
    <section>
        <p>Введите первые буквы трёх первых слов:</p>
    </section>
    <div id="app">
        <!-- <input type="text" v-model="categoryName"> -->
        <ul>
            <li v-for="item in categoryList">
            		<a href="#" @click="setCategory(item)">{{ item }}</a>                
            </li>
        </ul>

        <input type="text" v-model="search" class="input__focused">
      <!--   <div v-if="post.category == categoryName" v-for="post in filteredList">
	        <div v-for="article in post.content" class="block">
	            <p>Question: {{ article.question }}</p>
	            <p>Answer: {{ article.answer }}</p>
	            <div style="color:red">!!!: {{ article }}</div>
	        </div>
        </div> -->

        <div v-for="post in filteredList">        
	            <div v-bind="array" style="color:red;margin-bottom:20px">!!!: {{ post.content }}</div>
	            <!-- <div style="color:green">+++: {{ searchEntry }}</div> -->

	        </div>
        

        <div v-else>
            <div style="color:blue">No category</div>
        </div>
				
    </div>
    <footer>
    </footer>
    <script>
    var vm = new Vue({
        el: '#app',
        data: {
	        	item: '',
            search: '',
            categoryName: '',
            categoryList: [
                "first",
                "second"
            ],
            tips: [],
            array: []
        },
        created: function() {
            axios.get("https://raw.githubusercontent.com/ChornyArtsiom/phd/dev/data.json")
                .then(response => { this.tips = response.data })
        },
        computed: {
            //  filteredList() { return this.tips.filter(post => { 
            //   	if (this.search != '') 
            //   		return post.content[1].code.toLowerCase().includes(this.search.toLowerCase()) 
            //  	}) 
            // }


            // filteredList() {
            //     return this.tips.filter(post => {
            //         var index = null;
            //         if (this.search != '')
            //             for (index in post.content) {
            //               if(post.category == this.categoryName)
            //                 return post.content[index].code.toLowerCase().includes(this.search.toLowerCase())
            //             }
            //     })
            // }

            filteredList: function() {
            	// return this.tips.filter(post => {
	            //  				// console.log(post.category.toLowerCase().includes(this.categoryName.toLowerCase()));
                     
             //         return post.category.toLowerCase().includes(this.categoryName.toLowerCase())
	              
             //  })

             	var array = this.tips.filter(post => {
             		return post.category.toLowerCase().includes(this.categoryName.toLowerCase())
             	});

             	var result = array.map(a => a.content);

             	console.log(this.array);

             	return result;

             // return array;
             	

            }


    				

              
        },
        methods: {
        		setCategory(item) {
        			this.categoryName = item;
              // console.log(this.categoryName);


        		}
        }

    });
    // console.log(vm);
    </script>
</body>

</html>